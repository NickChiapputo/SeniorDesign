# August 17
## Index
1. [Summary](#summary)
1. [Problems Encountered](#problems-encountered)
1. [Things Learned](#things-learned)
	1. [Medium Range Radar](#medium-range-radar)
1. [Steps Taken](#steps-taken)
	1. [Manually Change X, Y, and Z Values](#manually-change-x-y-and-z-values)
	1. [Learning How The Number of Objects is Calculated](#learning-how-the-number-of-objects-is-calculated)
	1. [Finding Which Subframes Are Defined](#finding-which-subframes-are-defined)
	1. [Adding Frame and Subframe to MSS Logging Output](#adding-frame-and-subframe-to-mss-logging-output)

---

## Summary


---

## Problems Encountered
1. When selecting only USRR subframe (and removing MRR subframe), the MSS fails out after the first frame because the chirp interrupt flag is still high at the start of the next frame. 
	* This is probably because the number of chirps per subframe is not properly defined.
	* I did not do enough debugging to find a solution to this.

---

## Things Learned
### Medium Range Radar 
* 

---

## Steps Taken
### Used CCS to debug and modify the MRR lab.
#### Manually Change X, Y, and Z Values
1. In the `populateOutputs()` function in `dss_data_path.c`, adjusted the detect object list section to set the x, y, and z values for each detected object to 1. 
	* Built, loaded, and ran the new program on the board.
	* Opened the GUI to see the results.
	* Detected objects were all located around 0.013m. Don't know how this correlates to an x/y/z value of 1, but it appears this did correctly edit it.
1. Undid the changes and re-built, loaded, and executed the reverted program to see if the changes were correct.
	* Objects were now located in different locations. 
	* Importance of these two observations: We now know where the object locations are being calculated and can use this to implement our detection algorithm.

#### Learning How The Number of Objects is Calculated
1. Followed the `populateObjects()` function to trace where the argument's `detObj2D` attribute was populated.
	* Function is only called in the `MmwDemo_interFrameProcessing()` function.

#### Finding Which Subframes Are Defined
1. Checked include links to find out which of the chirps are used for the lab. There is a medium range radar at 120m and 80m (MRR120, MRR80) and an ultra-short range radar at 20m and 30m (USRR20, USRR30).
	* Following the files in the `common/` directory, the chirps are included in the `mrr_config_consts.h` file.
	* For MRR, the 120m chirp is selected.
	* For USRR, the 30m chirp is selected.
1. We are only concerned with USRR, so I compared the differences between USRR20 and USRR30.
	* Comments were the same. However, both mention a 20m range, so I am under the assumption that they are different but the developer did not change the comments after copy-pasting and editing the configurations.
	* Different definitions (first is USRR20, second is USRR30):
		* **`PROFILE_USRR_DIGOUT_SAMPLERATE_VAL`**
			* 6222U
			* 12500U
		* **`PROFILE_USRR_FREQ_SLOPE_MHZ_PER_US`**
			* 42.0f
			* 56.25f
1. Removing MRR profile and only using USRR.
	1. In `mrr_config_consts.h`, commented out `SUBFRAME_CONF_MRR_USRR` define and uncommented `SUBFRAME_CONF_USRR` to enable only one subframe (USRR). 
	1. MSS sends one output log when sending data through UART, then fails on the next frame start.
		* This is probably because the number of chirps per subframe is not properly defined.
		* I did not do enough debugging to find a solution to this.

#### Adding Frame and Subframe to MSS Logging Output
1. Changed logging output on MSS to display the subframe number.
	* This was done so that I could see which subframe was being sent through UART at what time.
	* Followed message sending protocol in DSS.
	* Found that the message is being sent through the `MmwDemo_mboxWrite()` function.
	* Message is being sent to the function from the `MRR_DSS_SendProcessOutputToMSS()` function.
	* At the end of this function, the `message.body.detObj.header.subFrameNumber` attribute of the message is set. 
	* This attribute can then be accessed on the MSS side of the mailbox message receive and added to the `System_printf` output function.
	* In the output, I set the beginning to be `%d-%d`. The first number is the frame number and the second is the subframe number.
		* Subframe 0 = USRR
		* Subframe 1 = MRR
		* Frame number is a counter that increments at the end of each frame (after both subframes).

